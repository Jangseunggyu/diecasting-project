# diecasting-project

## 🏭 프로젝트 제목

> **다이캐스팅 공정 데이터 기반 불량 예측·모니터링**

---

## 📌 목차

1. [프로젝트 개요](#-프로젝트-개요)
2. [데이터셋 소개](#-데이터셋-소개)
3. [분석 과정](#-분석-과정)
4. [주요 인사이트](#-주요-인사이트)
5. [결론](#-결론)
6. [사용 기술](#-사용-기술)
7. [프로젝트 구조](#-프로젝트-구조)
8. [팀원 소개](#-팀원-소개)

---

## 📝 프로젝트 개요

- **목적**: 다이캐스팅 공정의 센서·설비 데이터를 활용해 **품질 불량(passorfail=1) 사전 예측** 서비스 구축
- **배경**:
  - 다이캐스팅은 고온 금속을 고압으로 금형에 주입하는 공정으로 대량 생산에 적합하지만, 압력·속도·시간·온도 등 다변수의 동시 제어가 품질을 좌우함.
  - 중소 제조 현장에서는 변수 관리가 체계화되어 있지 않아 경험·수작업 의존이 크고, 불량(기공·수축·충전 부족 등)의 원인-데이터 매핑이 미흡함.
  - 공장 환경(온도·습도)·계절성 등 외생 요인이 품질 변동을 키워 장기 데이터 축적과 추세 분석이 필요함.
  - 따라서 공정 데이터를 표준화·정제하고, 머신러닝 예측 + XAI로 불량 사전 감지와 원인 해석을 제공하는 데이터 기반 운영 체계가 요구됨.
- **기대효과**:

  - **불량률 저감**(저온·워밍업 구간 관리, 임계치 알림)
  - **금형(mold_code)별 최적 조건** 도출 및 재현
  - **설명 가능한 AI(XAI)** 로 원인 가시화 → 현장 의사결정 지원

---

## 📂 데이터셋 소개

| 데이터명  | 주요 컬럼(예시)                                                                                        | 설명                         | 활용 목적                  |
| --------- | ------------------------------------------------------------------------------------------------------ | ---------------------------- | -------------------------- |
| 공정 메타 | `timestamp`, `date`, `time`, `mold_code`, `count`, `line`, `name`, `mold_name`, `working`              | 시각·금형·일일 생산 카운트   | 시계열 정합·리셋 구간 분석 |
| 온도 센서 | `sleeve_temperature`, `Coolant_temperature`, `upper_mold_temp1~3`, `lower_mold_temp1~3`, `molten_temp` | 슬리브/냉각수/금형/용탕 온도 | 불량과의 온도 구간 상관    |
| 사출/압력 | `low_section_speed`, `high_section_speed`, `cast_pressure`, `biscuit_thickness`                        | 사출 속도·압력·비스킷        | 충진/압력 조건 영향        |
| 이벤트    | `EMS_operation_time`, `emergency_stop`, `tryshot_signal`                                               | 교반/비상정지/트라이샷       | 이상 시점 플래그           |
| 타깃      | `passorfail` (0=양품, 1=불량)                                                                          | 최종 판정                    | 예측 대상, 불균형(≈4.45%)  |

> 참고: `molten_volume` 결측률↑, 일부 센서 0값/급스파이크 존재 → 전처리 필요

---

## 🔍 분석 과정

1. **데이터 스키마 정리**

   - 수치/범주 분리, 단위 점검

2. **데이터 전처리**

   - 결측: 행별 결측 개수 기반 제거(극단 행), 컬럼 결측률 기준 보존/제외 분기
   - 이상치: 0/물리 불가능값 삭제
   - 파생: datetime 파생변수 `hour/weekday/week`
   - 인코딩/스케일: 범주 원핫/빈도, 수치 스케일(필요 시)
   - 클래스 불균형: `class_weight`, 언더샘플/SMOTE 비교

3. **EDA(탐색)**

   - 단변량/이변량 분포: 수치·범주 변수의 분포 및 passorfail별 분포 비교(히스토그램/박스플롯/카운트플롯).
   - 상관/다중공선성: 피어슨·스피어만 상관행렬(heatmap), 필요 시 VIF로 다중공선성 점검.
   - 리셋·워밍업 구간 분석: count 리셋(0 또는 감소) 시점을 감지하여 초기 불안정 구간의 불량률 확인.
   - 시계열 패턴: 금형별 추세·주기성·변동성 파악.

4. **모델링**

   - 로지스틱/RandomForest .. 베이스라인 → 금형별/공용 모델 비교

5. **설명/진단(XAI)**

   - 특성 중요도·SHAP, 임계치 추천(저온/초기샷)

6. **대시보드(Shiny)**

   - 슬라이더 입력 → 예측/설명 출력, 금형별 추세·불량 오버레이

---

## 💡 주요 인사이트

- **리셋 직후 워밍업 취약**: `count` 리셋 후 초반 N샷에서 슬리브/냉각수 온도 변동↑ → 불량 비중 상승
- **저온 위험대**
- **금형별 차이**:

  - `8600` 상대적 안정(불량 드묾)
  - `8917` 변동성·0값 다수 → 불량 다발 → 센서/설정 점검 필요
  - `8722/8412/8573` 저온·리셋 구간과 불량 동반

- **형체력 안정 구간**: 690\~700 유지 시 양호, 급락(≈682↓) 시 주의

---

## 🏛 임시 결론

- **저온 구간과 리셋 직후 초기샷에서 불량 비율이 상대적으로 높게 관찰**됨(추가 검증 예정).

---

## 🛠 사용 기술

**언어**

- Python 3.11

**라이브러리 & 프레임워크**

- 데이터 처리: `pandas`, `numpy`
- 분석/알고리즘: `scikit-learn`, `scipy`, `statsmodels`
- 시각화: `matplotlib`, `seaborn`, `plotly`
- 웹/대시보드: **Shiny for Python(Core)**
- 기타: `joblib`, `pyyaml`, `loguru`

**환경**

- Jupyter Notebook, VSCode
- Git/GitHub

---

## 📁 프로젝트 구조

```plaintext
📦 diecasting-project
 ┣ 📂 data              # 원본 및 전처리 데이터
 ┣ 📂 models            # 학습한 모델 저장
 ┣ 📂 modules           # Shiny 앱과 분석·시각화 로직을 연결하는 모듈
 ┣ 📂 prep              # 데이터 전처리 스크립트
 ┣ 📂 viz               # 분석 결과 시각화 코드 및 함수
 ┣ 📂 www               # 정적 파일 (CSS, JS 등 스타일 리소스)
 ┣ 📜 app.py            # Shiny 웹앱 실행 메인 파일
 ┣ 📜 shared.py         # 웹앱 공통 모듈 (데이터 로딩, 전역 변수 등)
 ┣ 📜 README.md         # 프로젝트 설명 문서
 ┣ 📜 requirements.txt  # pip 환경 설정
 ┗ 📜 environment.yml   # conda 환경 설정
```

---

## 👥 팀원 소개

| 이름   | 역할          | 담당                                                  |
| ------ | ------------- | ----------------------------------------------------- |
| 김선준 | 데이터 전처리 | ...                                                   |
| 안형엽 | 데이터 전처리 | ...                                                   |
| 이우영 | 데이터 전처리 | ...                                                   |
| 임지원 | 데이터 전처리 | ...                                                   |
| 장승규 | 데이터 전처리 | ...                                                   |
| 황연주 | EDA/대시보드  | 결측·이상치 처리, 금형별 시계열 분석, Shiny Core 구현 |
